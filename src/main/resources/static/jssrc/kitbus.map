{"version":3,"file":"kitbus.min.js","sources":["kitbus.js"],"names":["this","App","call","RideBusModel","__hasProp","hasOwnProperty","__extends","child","parent","ctor","constructor","key","prototype","__super__","_super","apply","arguments","defaults","departureTime","Backbone","Model","rideBusModel","TimetableCollection","model","TimetableModel","Collection","timetableList","SHUTTLE_OUTWARD","SHUTTLE_HOMEWARD","building1","building74","building61","building65","setTime","shuttle","timeArray","AppView","dateFormat","getServiceDay","events","change input[name=\"shuttle\"]","click #notifTestButton","initialize","Notification","requestPermission","selectedPermission","permission","$time","$","intervalTime","initView","updateTime","setInterval","_this","date","dispTime","minute","Date","getMinutes","getHours","text","render","onChangeShuttle","shuttleChecked","val","reset","timetableArray","onClickNotifTest","notify","tag","body","icon","getMonth","getDate","ajax","url","cache","dataType","then","data","serviceDay","setTimetable","trigger","timetableData","timetable","_i","_j","_len","_len1","_ref","_ref1","outward","homeward","length","busStopTimeList","toLowerCase","push","View","targetDate","month","year","getFullYear","servicetable","serviceMap","getDay","RideBusView","change #beforeAlert","departureTimeTmpl","_","template","html","bindAll","on","onChange","get","toJSON","setTimer","beforeAlert","i","nowHour","nowMinute","nowSecond","targetSecond","targetTime","value","parseInt","isNaN","getSeconds","split","timer","clearTimeout","setTimeout","onChangeBeforeAlert","TimetableListView","click tbody td","options","timetableTmpl","timetableHeaderOutwardTmpl","timetableHeaderHomewardTmpl","timetableRowOutwardTmpl","timetableRowHomewardTmpl","collection","onReset","$tbody","$thead","$el","each","timetableModel","append","onClickTime","e","$td","index","currentTarget","find","set","appView","timetableListView","el","rideBusView"],"mappings":"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"}