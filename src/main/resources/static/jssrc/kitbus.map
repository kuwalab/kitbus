{"version":3,"file":"kitbus.min.js","sources":["kitbus.js"],"names":["this","App","call","RideBusModel","__hasProp","hasOwnProperty","__extends","child","parent","ctor","constructor","key","prototype","__super__","_super","apply","arguments","defaults","departureTime","Backbone","Model","rideBusModel","TimetableCollection","model","TimetableModel","Collection","timetableList","SHUTTLE_OUTWARD","SHUTTLE_HOMEWARD","building1","building74","building61","building65","setTime","shuttle","timeArray","AppView","dateFormat","getServiceDay","events","change input[name=\"shuttle\"]","initialize","initView","render","onChangeShuttle","shuttleChecked","$","val","reset","timetableArray","ajax","url","cache","dataType","then","_this","data","serviceDay","setTimetable","timetableData","timetable","_i","_j","_len","_len1","_ref","_ref1","outward","homeward","length","busStopTimeList","toLowerCase","push","View","targetDate","date","month","year","getFullYear","getMonth","getDate","servicetable","Date","serviceMap","getDay","RideBusView","change #beforeAlert","departureTimeTmpl","_","template","html","bindAll","on","onChange","get","toJSON","setTimer","beforeAlert","i","nowHour","nowMinute","nowSecond","targetSecond","targetTime","value","parseInt","NaN","Notification","requestPermission","selectedPermission","permission","getHours","getMinutes","getSeconds","split","timer","clearTimeout","setTimeout","notify","tag","body","icon","onChangeBeforeAlert","TimetableListView","click tbody td","options","timetableTmpl","timetableHeaderOutwardTmpl","timetableHeaderHomewardTmpl","timetableRowOutwardTmpl","timetableRowHomewardTmpl","collection","onReset","$tbody","$thead","$el","each","timetableModel","append","onClickTime","e","$td","index","currentTarget","find","set","text","appView","timetableListView","el","rideBusView"],"mappings":"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"}