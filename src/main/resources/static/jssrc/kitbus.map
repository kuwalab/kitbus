{"version":3,"file":"kitbus.min.js","sources":["kitbus.js"],"names":["this","App","call","RideBusModel","__hasProp","hasOwnProperty","__extends","child","parent","ctor","constructor","key","prototype","__super__","_super","apply","arguments","defaults","departureTime","Backbone","Model","rideBusModel","TimetableCollection","model","TimetableModel","Collection","timetableList","SHUTTLE_OUTWARD","SHUTTLE_HOMEWARD","building1","building74","building61","building65","setTime","shuttle","timeArray","AppView","dateFormat","getServiceDay","events","change input[name=\"shuttle\"]","initialize","initView","render","onChangeShuttle","shuttleChecked","$","val","reset","timetableArray","date","Date","text","getMonth","getDate","ajax","url","cache","dataType","then","_this","data","serviceDay","setTimetable","trigger","timetableData","timetable","_i","_j","_len","_len1","_ref","_ref1","outward","homeward","length","busStopTimeList","toLowerCase","push","View","targetDate","month","year","getFullYear","servicetable","serviceMap","getDay","RideBusView","change #beforeAlert","departureTimeTmpl","_","template","html","bindAll","on","onChange","get","toJSON","setTimer","beforeAlert","i","nowHour","nowMinute","nowSecond","targetSecond","targetTime","value","parseInt","isNaN","Notification","requestPermission","selectedPermission","permission","getHours","getMinutes","getSeconds","split","timer","clearTimeout","setTimeout","notify","tag","body","icon","onChangeBeforeAlert","TimetableListView","click tbody td","options","timetableTmpl","timetableHeaderOutwardTmpl","timetableHeaderHomewardTmpl","timetableRowOutwardTmpl","timetableRowHomewardTmpl","collection","onReset","$tbody","$thead","$el","each","timetableModel","append","onClickTime","e","$td","index","currentTarget","find","set","appView","timetableListView","el","rideBusView"],"mappings":"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"}