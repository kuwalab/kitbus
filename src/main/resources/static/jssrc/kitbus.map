{"version":3,"file":"kitbus.min.js","sources":["kitbus.js"],"names":["this","App","call","RideBusModel","__hasProp","hasOwnProperty","__extends","child","parent","ctor","constructor","key","prototype","__super__","_super","apply","arguments","defaults","departureTime","Backbone","Model","rideBusModel","TimetableCollection","model","TimetableModel","Collection","timetableList","SHUTTLE_OUTWARD","SHUTTLE_HOMEWARD","building1","building74","building61","building65","setTime","shuttle","timeArray","AppView","dateFormat","getServiceDay","events","change input[name=\"shuttle\"]","initialize","initView","render","onChangeShuttle","shuttleChecked","$","val","reset","timetableArray","date","Date","text","getMonth","getDate","ajax","url","cache","dataType","then","_this","data","serviceDay","setTimetable","trigger","Notification","requestPermission","selectedPermission","permission","timetableData","timetable","_i","_j","_len","_len1","_ref","_ref1","outward","homeward","length","busStopTimeList","toLowerCase","push","View","targetDate","month","year","getFullYear","servicetable","serviceMap","getDay","RideBusView","change #beforeAlert","departureTimeTmpl","_","template","html","bindAll","on","onChange","get","toJSON","setTimer","beforeAlert","i","nowHour","nowMinute","nowSecond","targetSecond","targetTime","value","parseInt","isNaN","getHours","getMinutes","getSeconds","split","timer","clearTimeout","setTimeout","notify","tag","body","icon","onChangeBeforeAlert","TimetableListView","click tbody td","options","timetableTmpl","timetableHeaderOutwardTmpl","timetableHeaderHomewardTmpl","timetableRowOutwardTmpl","timetableRowHomewardTmpl","collection","onReset","$tbody","$thead","$el","each","timetableModel","append","onClickTime","e","$td","index","currentTarget","find","set","appView","timetableListView","el","rideBusView"],"mappings":"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"}