{"version":3,"file":"kitbus.min.js","sources":["kitbus.js"],"names":["this","App","call","RideBusModel","__hasProp","hasOwnProperty","__extends","child","parent","ctor","constructor","key","prototype","__super__","_super","apply","arguments","defaults","departureTime","Backbone","Model","rideBusModel","TimetableCollection","model","TimetableModel","Collection","timetableList","SHUTTLE_OUTWARD","SHUTTLE_HOMEWARD","building1","building74","building61","building65","setTime","shuttle","timeArray","AppView","dateFormat","getServiceDay","events","change input[name=\"shuttle\"]","click #notifTestButton","initialize","Notification","requestPermission","selectedPermission","permission","initView","intervalTime","setInterval","_this","updateTime","render","onChangeShuttle","shuttleChecked","$","val","reset","timetableArray","onClickNotifTest","notify","tag","body","icon","date","Date","text","getMonth","getDate","ajax","url","cache","dataType","then","data","serviceDay","setTimetable","trigger","timetableData","timetable","_i","_j","_len","_len1","_ref","_ref1","outward","homeward","length","busStopTimeList","toLowerCase","push","View","targetDate","month","year","getFullYear","servicetable","serviceMap","getDay","RideBusView","change #beforeAlert","departureTimeTmpl","_","template","html","bindAll","on","onChange","get","toJSON","setTimer","beforeAlert","i","nowHour","nowMinute","nowSecond","targetSecond","targetTime","value","parseInt","isNaN","getHours","getMinutes","getSeconds","split","timer","clearTimeout","setTimeout","onChangeBeforeAlert","TimetableListView","click tbody td","options","timetableTmpl","timetableHeaderOutwardTmpl","timetableHeaderHomewardTmpl","timetableRowOutwardTmpl","timetableRowHomewardTmpl","collection","onReset","$tbody","$thead","$el","each","timetableModel","append","onClickTime","e","$td","index","currentTarget","find","set","appView","timetableListView","el","rideBusView"],"mappings":"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"}