{"version":3,"file":"kitbus.min.js","sources":["kitbus.js"],"names":["this","App","call","RideBusModel","__hasProp","hasOwnProperty","__extends","child","parent","ctor","constructor","key","prototype","__super__","_super","apply","arguments","defaults","departureTime","Backbone","Model","rideBusModel","TimetableCollection","model","TimetableModel","Collection","timetableList","SHUTTLE_OUTWARD","SHUTTLE_HOMEWARD","building1","building74","building61","building65","setTime","shuttle","timeArray","AppView","dateFormat","getServiceDay","events","change input[name=\"shuttle\"]","click #notifTestButton","initialize","Notification","requestPermission","selectedPermission","permission","initView","render","onChangeShuttle","shuttleChecked","$","val","reset","timetableArray","onClickNotifTest","notify","tag","body","icon","date","Date","text","getMonth","getDate","ajax","url","cache","dataType","then","_this","data","serviceDay","setTimetable","trigger","timetableData","timetable","_i","_j","_len","_len1","_ref","_ref1","outward","homeward","length","busStopTimeList","toLowerCase","push","View","targetDate","month","year","getFullYear","servicetable","serviceMap","getDay","RideBusView","change #beforeAlert","departureTimeTmpl","_","template","html","bindAll","on","onChange","get","toJSON","setTimer","beforeAlert","i","nowHour","nowMinute","nowSecond","targetSecond","targetTime","value","parseInt","isNaN","getHours","getMinutes","getSeconds","split","timer","clearTimeout","setTimeout","onChangeBeforeAlert","TimetableListView","click tbody td","options","timetableTmpl","timetableHeaderOutwardTmpl","timetableHeaderHomewardTmpl","timetableRowOutwardTmpl","timetableRowHomewardTmpl","collection","onReset","$tbody","$thead","$el","each","timetableModel","append","onClickTime","e","$td","index","currentTarget","find","set","appView","timetableListView","el","rideBusView"],"mappings":"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"}