{"version":3,"file":"kitbus.min.js","sources":["kitbus.js"],"names":["this","App","call","RideBusModel","__hasProp","hasOwnProperty","__extends","child","parent","ctor","constructor","key","prototype","__super__","_super","apply","arguments","defaults","departureTime","Backbone","Model","rideBusModel","TimetableCollection","model","TimetableModel","Collection","timetableList","SHUTTLE_OUTWARD","SHUTTLE_HOMEWARD","building1","building74","building61","building65","setTime","shuttle","timeArray","AppView","dateFormat","getServiceDay","events","change input[name=\"shuttle\"]","initialize","initView","render","onChangeShuttle","shuttleChecked","$","val","reset","timetableArray","ajax","url","cache","dataType","then","_this","data","serviceDay","setTimetable","trigger","timetableData","timetable","_i","_j","_len","_len1","_ref","_ref1","outward","homeward","length","busStopTimeList","toLowerCase","push","View","targetDate","date","month","year","getFullYear","getMonth","getDate","servicetable","Date","serviceMap","getDay","RideBusView","change #beforeAlert","departureTimeTmpl","_","template","html","bindAll","on","onChange","get","toJSON","setTimer","beforeAlert","i","nowHour","nowMinute","nowSecond","targetSecond","targetTime","value","parseInt","isNaN","Notification","requestPermission","selectedPermission","permission","getHours","getMinutes","getSeconds","split","timer","clearTimeout","setTimeout","notify","tag","body","icon","onChangeBeforeAlert","TimetableListView","click tbody td","options","timetableTmpl","timetableHeaderOutwardTmpl","timetableHeaderHomewardTmpl","timetableRowOutwardTmpl","timetableRowHomewardTmpl","collection","onReset","$tbody","$thead","$el","each","timetableModel","append","onClickTime","e","$td","index","currentTarget","find","set","text","appView","timetableListView","el","rideBusView"],"mappings":"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"}