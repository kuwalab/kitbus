{"version":3,"file":"kitbus.min.js","sources":["kitbus.js"],"names":["this","App","call","RideBusModel","__hasProp","hasOwnProperty","__extends","child","parent","ctor","constructor","key","prototype","__super__","_super","apply","arguments","defaults","departureTime","beforeAlert","Backbone","Model","rideBusModel","TimetableCollection","model","TimetableModel","Collection","timetableList","SHUTTLE_OUTWARD","SHUTTLE_HOMEWARD","building1","building74","building61","building65","setTime","shuttle","timeArray","AppView","dateFormat","getServiceDay","events","change input[name=\"shuttle\"]","initialize","initView","render","onChangeShuttle","shuttleChecked","$","val","reset","timetableArray","ajax","url","cache","dataType","then","_this","data","serviceDay","setTimetable","timetableData","timetable","_i","_j","_len","_len1","_ref","_ref1","outward","homeward","length","busStopTimeList","toLowerCase","push","View","targetDate","date","month","year","getFullYear","getMonth","getDate","servicetable","Date","serviceMap","getDay","RideBusView","departureTimeTmpl","_","template","html","bindAll","on","onChange","get","toJSON","nowHour","nowMinute","nowSecond","targetSecond","targetTime","parseInt","NaN","set","Notification","requestPermission","selectedPermission","permission","getHours","getMinutes","getSeconds","split","console","log","setTimeout","notify","tag","body","icon","TimetableListView","click tbody td","options","timetableTmpl","timetableHeaderOutwardTmpl","timetableHeaderHomewardTmpl","timetableRowOutwardTmpl","timetableRowHomewardTmpl","collection","onReset","$tbody","$thead","$el","each","timetableModel","append","onClickTime","e","$td","index","currentTarget","find","text","appView","timetableListView","el","rideBusView"],"mappings":"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"}