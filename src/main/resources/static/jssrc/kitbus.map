{"version":3,"file":"kitbus.min.js","sources":["kitbus.js"],"names":["this","App","call","RideBusModel","__hasProp","hasOwnProperty","__extends","child","parent","ctor","constructor","key","prototype","__super__","_super","apply","arguments","defaults","departureTime","Backbone","Model","rideBusModel","TimetableCollection","model","TimetableModel","Collection","timetableList","SHUTTLE_OUTWARD","SHUTTLE_HOMEWARD","building1","building74","building61","building65","setTime","shuttle","timeArray","AppView","dateFormat","getServiceDay","events","change input[name=\"shuttle\"]","click #notifTestButton","initialize","Notification","requestPermission","selectedPermission","permission","$time","$","intervalTime","initView","updateTime","setInterval","_this","date","dispTime","minute","Date","getMinutes","getHours","text","render","onChangeShuttle","shuttleChecked","val","reset","timetableArray","onClickNotifTest","notify","tag","body","icon","getMonth","getDate","ajax","url","cache","dataType","then","data","serviceName","serviceDay","WEEKDAY","SATURDAY","SUNDAY","setTimetable","trigger","timetableData","timetable","_i","_j","_len","_len1","_ref","_ref1","outward","homeward","length","busStopTimeList","toLowerCase","push","View","targetDate","month","year","getFullYear","servicetable","serviceMap","getDay","RideBusView","change #beforeAlert","departureTimeTmpl","_","template","html","bindAll","on","onChange","get","toJSON","setTimer","beforeAlert","i","nowHour","nowMinute","nowSecond","targetSecond","targetTime","value","parseInt","isNaN","getSeconds","split","timer","clearTimeout","setTimeout","onChangeBeforeAlert","TimetableListView","click tbody td","options","timetableTmpl","timetableHeaderOutwardTmpl","timetableHeaderHomewardTmpl","timetableRowOutwardTmpl","timetableRowHomewardTmpl","collection","onReset","$tbody","$thead","$el","each","timetableModel","append","onClickTime","e","$td","index","currentTarget","find","set","appView","timetableListView","el","rideBusView"],"mappings":"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"}